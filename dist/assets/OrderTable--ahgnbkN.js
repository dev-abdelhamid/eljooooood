import{r as d,u as v,j as t,m as f,L as k,B as s,b as $,d as l,P as C,T as A,C as T}from"./index-D6qGjsdI.js";const m={pending:{color:"bg-yellow-100 text-yellow-700",label:"pending",icon:$},approved:{color:"bg-teal-100 text-teal-700",label:"approved",icon:l},in_production:{color:"bg-purple-100 text-purple-700",label:"in_production",icon:C},completed:{color:"bg-green-100 text-green-700",label:"completed",icon:l},in_transit:{color:"bg-blue-100 text-blue-700",label:"in_transit",icon:A},delivered:{color:"bg-gray-100 text-gray-700",label:"delivered",icon:l},cancelled:{color:"bg-red-100 text-red-700",label:"cancelled",icon:T}},L=d.memo(({orders:p,calculateAdjustedTotal:u,calculateTotalQuantity:g,translateUnit:o,updateOrderStatus:i,openAssignModal:h,submitting:n,isRtl:a,startIndex:y})=>{const{user:r}=v(),b=d.useMemo(()=>e=>e.items.map(c=>`(${c.quantity} ${o(c.unit,a)} ${c.productName})`).join(" + "),[a,o]);return t.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"overflow-x-auto rounded-md shadow-md border border-gray-100 bg-white",role:"table","aria-label":a?"جدول الطلبات":"Orders Table",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-100 text-xs",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{className:a?"flex-row-reverse":"",children:[t.jsx("th",{className:"px-2 py-2 font-medium text-gray-600 uppercase tracking-wider text-center min-w-[40px]",children:a?"رقم":"No."}),t.jsx("th",{className:"px-2 py-2 font-medium text-gray-600 uppercase tracking-wider text-center min-w-[100px]",children:a?"رقم الطلب":"Order Number"}),t.jsx("th",{className:"px-2 py-2 font-medium text-gray-600 uppercase tracking-wider text-center min-w-[100px]",children:a?"الفرع":"Branch"}),t.jsx("th",{className:"px-2 py-2 font-medium text-gray-600 uppercase tracking-wider text-center min-w-[80px]",children:a?"الحالة":"Status"}),t.jsx("th",{className:"px-2 py-2 font-medium text-gray-600  tracking-wider text-center ",children:a?"المنتجات":"Products"}),t.jsx("th",{className:"px-2 py-2 font-medium text-gray-600 uppercase tracking-wider text-center min-w-[100px]",children:a?"إجمالي المبلغ":"Total Amount"}),t.jsx("th",{className:"px-2 py-2 font-medium text-gray-600 uppercase tracking-wider text-center min-w-[80px]",children:a?"الكمية الإجمالية":"Total Quantity"}),t.jsx("th",{className:"px-2 py-2 font-medium text-gray-600 uppercase tracking-wider text-center min-w-[100px]",children:a?"التاريخ":"Date"}),t.jsx("th",{className:"px-2 py-2 font-medium text-gray-600 uppercase tracking-wider text-center min-w-[120px]",children:a?"الإجراءات":"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-100",children:p.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:10,className:"text-center py-4 text-gray-500 text-xs",children:a?"لا توجد طلبات":"No orders found"})}):p.map((e,c)=>{const x=m[e.status]||m.pending,N=x.icon,j=d.useMemo(()=>e.items.filter(w=>!w.assignedTo),[e.items]);return t.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${a?"flex-row-reverse":""}`,children:[t.jsx("td",{className:"px-2 py-2 text-gray-600 text-center whitespace-nowrap",children:y+c}),t.jsx("td",{className:"px-2 py-2 text-gray-600 text-center truncate max-w-[100px]",children:e.orderNumber}),t.jsx("td",{className:"px-2 py-2 text-gray-600 text-center truncate max-w-[100px]",children:e.branchName}),t.jsx("td",{className:"px-2 py-2 text-center whitespace-nowrap",children:t.jsxs("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium items-center gap-1 ${x.color} ${a?"flex-row-reverse":""}`,children:[t.jsx(N,{className:"w-4 h-4"}),a?{pending:"قيد الانتظار",approved:"تم الموافقة",in_production:"في الإنتاج",completed:"مكتمل",in_transit:"في النقل",delivered:"تم التسليم",cancelled:"ملغى"}[e.status]:x.label]})}),t.jsx("td",{className:"px-2 py-2 text-gray-600 text-center",children:b(e)}),t.jsx("td",{className:"px-2 py-2 text-gray-600 text-center truncate",children:u(e)}),t.jsx("td",{className:"px-2 py-2 text-gray-600 text-center",children:g(e)}),t.jsx("td",{className:"px-2 py-2 text-gray-600 text-center truncate",children:e.date}),t.jsx("td",{className:"px-2 py-2 text-center",children:t.jsxs("div",{className:`flex gap-1 flex-wrap ${a?"justify-end":"justify-start"}`,children:[t.jsx(k,{to:`/orders/${e.id}`,children:t.jsx(s,{variant:"primary",size:"xs",className:"bg-blue-500 hover:bg-blue-600 text-white rounded-md px-2 py-1 text-xs","aria-label":a?`عرض طلب رقم ${e.orderNumber}`:`View order #${e.orderNumber}`,children:a?"عرض":"View"})}),(r==null?void 0:r.role)==="production"&&e.status==="pending"&&t.jsxs(t.Fragment,{children:[t.jsx(s,{variant:"success",size:"xs",onClick:()=>i(e.id,"approved"),className:"bg-green-500 hover:bg-green-600 text-white rounded-md px-2 py-1 text-xs",disabled:n===e.id,"aria-label":a?`الموافقة على طلب رقم ${e.orderNumber}`:`Approve order #${e.orderNumber}`,children:n===e.id?a?"جارٍ...":"Loading...":a?"موافقة":"Approve"}),t.jsx(s,{variant:"danger",size:"xs",onClick:()=>i(e.id,"cancelled"),className:"bg-red-500 hover:bg-red-600 text-white rounded-md px-2 py-1 text-xs",disabled:n===e.id,"aria-label":a?`إلغاء طلب رقم ${e.orderNumber}`:`Cancel order #${e.orderNumber}`,children:n===e.id?a?"جارٍ...":"Loading...":a?"إلغاء":"Cancel"})]}),(r==null?void 0:r.role)==="production"&&e.status==="approved"&&j.length>0&&t.jsx(s,{variant:"primary",size:"xs",onClick:()=>h(e),className:"bg-blue-500 hover:bg-blue-600 text-white rounded-md px-2 py-1 text-xs",disabled:n===e.id,"aria-label":a?`تعيين طلب رقم ${e.orderNumber}`:`Assign order #${e.orderNumber}`,children:n===e.id?a?"جارٍ...":"Loading...":a?"توزيع":"Assign"}),(r==null?void 0:r.role)==="production"&&e.status==="completed"&&t.jsx(s,{variant:"primary",size:"xs",onClick:()=>i(e.id,"in_transit"),className:"bg-blue-500 hover:bg-blue-600 text-white rounded-md px-2 py-1 text-xs",disabled:n===e.id,"aria-label":a?`شحن طلب رقم ${e.orderNumber}`:`Ship order #${e.orderNumber}`,children:n===e.id?a?"جارٍ...":"Loading...":a?"شحن":"Ship"})]})})]},e.id)})})]})})});export{L as default};
