import{r as v,j as s,m as $,B as d,b as w,d as c,P as C,T as _,C as k}from"./index-OixFsMgm.js";const b={pending:{color:"bg-yellow-100 text-yellow-800",icon:w,label:"pending",progress:0},approved:{color:"bg-teal-100 text-teal-800",icon:c,label:"approved",progress:25},in_production:{color:"bg-purple-100 text-purple-800",icon:C,label:"in_production",progress:50},completed:{color:"bg-green-100 text-green-800",icon:c,label:"completed",progress:75},in_transit:{color:"bg-blue-100 text-blue-800",icon:_,label:"in_transit",progress:90},delivered:{color:"bg-gray-100 text-gray-800",icon:c,label:"delivered",progress:100},cancelled:{color:"bg-red-100 text-red-800",icon:k,label:"cancelled",progress:0}},T=e=>e?e.trim().split(" ").slice(0,2).join(" "):"غير معروف",O=v.memo(({order:e,t:i,isRtl:t,calculateAdjustedTotal:g,calculateTotalQuantity:o,viewOrder:h,openConfirmDeliveryModal:j,openReturnModal:N,user:a,submitting:x})=>{var m,p,u;const l=b[e.status]||b.pending,y=l.icon;return s.jsx($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:s.jsx("div",{className:"p-4 sm:p-5 mb-4 bg-white shadow-md rounded-lg border border-gray-200 hover:shadow-lg transition-shadow duration-300",children:s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t?`الطلب #${e.orderNumber}`:`Order #${e.orderNumber}`}),s.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium flex items-center gap-1 ${l.color}`,children:[s.jsx(y,{className:"w-4 h-4"}),s.jsx("span",{children:t?e.status==="pending"?"معلق":e.status==="approved"?"معتمد":e.status==="in_production"?"قيد الإنتاج":e.status==="completed"?"مكتمل":e.status==="in_transit"?"في النقل":e.status==="delivered"?"تم التسليم":"ملغى":i(`orders.status_${l.label}`)})]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:s.jsx("div",{className:"bg-amber-600 h-2.5 rounded-full transition-all duration-500",style:{width:`${l.progress}%`}})}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:t?"الكمية الإجمالية":"Total Quantity"}),s.jsx("p",{className:"text-sm font-medium text-gray-800",children:t?`${o(e)} عنصر`:`${o(e)} items`})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:t?"إجمالي المبلغ":"Total Amount"}),s.jsx("p",{className:"text-sm font-semibold text-teal-600",children:g(e)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:t?"التاريخ":"Date"}),s.jsx("p",{className:"text-sm font-medium text-gray-800",children:e.date})]})]}),s.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded-md",children:[s.jsxs("p",{className:"text-xs font-medium text-gray-800",children:[t?"المنتجات":"Products",":"]}),s.jsx("p",{className:"text-sm text-gray-700",children:e.items.map(n=>`(${n.quantity} ${i(`${n.unit||"unit"}`)}  ${T(n.productName)})`).join(" + ")})]}),((m=e.returns)==null?void 0:m.length)>0&&s.jsxs("div",{className:"mt-2 p-2 bg-amber-50 rounded-md",children:[s.jsxs("p",{className:"text-xs font-medium text-amber-800",children:[t?"المرتجعات":"Returns",":"]}),e.returns.map((n,f)=>s.jsx("p",{className:"text-xs text-amber-700",children:t?`إرجاع ${n.items.map(r=>`${r.quantity} ${`سبب الارجاع : ${r.reason}`}`).join(", ")} - ${` الحالة:${n.status}`}`:`Return ${n.items.map(r=>`${r.quantity} ${`return resons :${r.reason}`}`).join(", ")} - ${`status: ${n.status}`}`},f))]}),e.notes&&s.jsx("div",{className:"mt-2 p-2 bg-amber-50 rounded-md",children:s.jsxs("p",{className:"text-xs text-amber-800",children:[s.jsxs("strong",{children:[t?"ملاحظات":"Notes",":"]})," ",e.notes]})}),s.jsxs("div",{className:`flex flex-wrap gap-2 ${t?"justify-end":"justify-start"}`,children:[s.jsx(d,{variant:"primary",size:"sm",onClick:()=>h(e),className:"bg-blue-500 hover:bg-blue-600 text-white rounded-full px-3 py-1 text-xs","aria-label":t?`عرض الطلب ${e.orderNumber}`:`View order ${e.orderNumber}`,children:t?"عرض":"View"}),e.status==="in_transit"&&(a==null?void 0:a.role)==="branch"&&((p=e.branch)==null?void 0:p._id)===a.branchId&&s.jsx(d,{variant:"success",size:"sm",onClick:()=>j(e),className:"bg-green-500 hover:bg-green-600 text-white rounded-full px-3 py-1 text-xs",disabled:x===e.id,"aria-label":t?`تأكيد تسليم الطلب ${e.orderNumber}`:`Confirm delivery of order ${e.orderNumber}`,children:t?"تأكيد التسليم":"Confirm Delivery"}),e.status==="delivered"&&(a==null?void 0:a.role)==="branch"&&((u=e.branch)==null?void 0:u._id)===a.branchId&&s.jsx(d,{variant:"secondary",size:"sm",onClick:()=>N(e,e.items[0].itemId),className:"bg-red-500 hover:bg-red-600 text-white rounded-full px-3 py-1 text-xs",disabled:x==="return","aria-label":t?`إرجاع الطلب ${e.orderNumber}`:`Return order ${e.orderNumber}`,children:t?"إرجاع":"Return"})]})]})})})});export{O as default};
